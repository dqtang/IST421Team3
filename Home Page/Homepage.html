<!doctype html>
<html>

<head>
<meta charset="utf-8">
<title>Home Page</title>
</head>
<link href="homeP.css" rel="stylesheet" type="text/css">	

<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		const params = new URLSearchParams(document.location.search);
			const id_token = params.get('id_token');
	
			function decodeJwtResponse(id_token){
								var base64Url = id_token.split('.')[1];
								var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
								var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
									return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
								}).join(''));
	
								return JSON.parse(jsonPayload);
							};
			const responsePayload = decodeJwtResponse(id_token);
	
			firstName = responsePayload.given_name;
			lastName = responsePayload.family_name;
			profileImageUrl = responsePayload.picture;
			email = responsePayload.email;
			gID = responsePayload.sub;
	</script>
	<header>
	<div class= "container1"><a  onclick="homePage()">Flex Media</a>
<input type ="text" placeholder="search" >



<a><img src="AddaPost.PNG" class ="new_post" width="38" height="31" onclick="uploadPage()"/></a>
<a ><img src="Home ICon.PNG" width="38" height="31" alt=""onclick="homePage()"/></a>
<p style="width: 100px">&nbsp; </p>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
</div>


<script>
	//Redirect Functions to include id_tokens
function uploadPage() {
    location.href = "http://localhost/upload.html?id_token="+id_token;
}

function homePage(){
	location.href = "http://localhost/Home Page/Homepage.html?id_token="+id_token;
}

</script>

		
</header>

	
<div class="profilePic" name = "profilePic"> <a> <img src="https://lh3.googleusercontent.com/a/AATXAJyitlq8-zV0bSzZfRsYkeUQYA-HzT5PnolCobZ8=s96-c" id = "profilePic" width = "30px" height="30px"/> </a>
</div>

<div class="container2" > <a> <img src="tech.PNG"  width = "30px" height="30px"/> DT200</a>
</div>
<div class = "center">
<img src="tech.PNG" width="250" height="250" alt="" class="center"/>
<input type ="text" placeholder="comment...." class="center" >
</div>

	

<div class="container2" > <a> <img src="tech.PNG"  width = "30px" height="30px"/> DT200</a>
</div>
<script>
	//Change Profile Pic
	var image = document.getElementsByClassName("profilePic");
	image.src = profileImageUrl;
</script>
<div class = "center">
<img src="tech.PNG" width="250" height="250" alt="" class="center"/>
<input type ="text" placeholder="comment...." class="center" >
</div>
	
<div class="center" > <a> <img src="tech.PNG"  width = "30px" height="30px"/> DT200</a>
</div>
<div class = "center">
<img src="tech.PNG" width="250" height="250" alt="" class="center"/>
<input type ="text" placeholder="comment...." class="center" >
</div>

<div class="container3"> <figcaption>Friends</figcaption> 
<p>__________________________________________________</p>

<ul> 
<dt class="list"></dt>

<dt class="space"><a><img src="tech.PNG" width = "30px" height = "30px"/>Anzar_1</a></dt>
<dt class="space"><a><img src="image.png" alt="poojan2211"/></a></dt>
<dt class="space"><a><img src="image.png" alt="Chrisandy334"/></a></dt>
<dt class="space" id="space"><a><img src="image.png" alt="RayMosam331"/></a></dt>


</ul>
</div>
<script>
	const xhttp = new XMLHttpRequest();


	xhttp.open("POST", "http://localhost/Friendlist.php", true);
	xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	xhttp.send("gID="+gID);
	xhttp.onload = function(){
		document.getElementById("space").innerHTML = this.responseText;
		
	}

</script>

	
</body>
</html>