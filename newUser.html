<!doctype html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<style>
		h1 {text-align: center; font-weight: bold; font-style:italic;}
		h2 {text-align: center; font-weight: bold}
			
		b1 {text-align: center;}
			body {background-color: #D6C7F5;}
		button{text-align: center; line-height: 1.1;
			padding: 0.75em 0.90em;
  			min-width: 10ch;
  			min-height: 44px;
			background-color: #0099CC; /* Blue background color */
			border-radius: 30px; /* Curve of border corners */
			color: white; /* Text color */;}	
			div1{align-content: center}
			
	</style>
<meta charset="utf-8">
<title>Flex Media New User</title>
</head>
<h1>Flex Media</h1>
	<h2>Sign Up</h2>
<b1>
	<script>
		const params = new URLSearchParams(document.location.search);
		const id_token = params.get('id_token');

		function decodeJwtResponse(id_token){
							var base64Url = id_token.split('.')[1];
							var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
							var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
								return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
							}).join(''));

							return JSON.parse(jsonPayload);
						};
		const responsePayload = decodeJwtResponse(id_token);
		firstName = responsePayload.given_name;
		lastName = responsePayload.family_name;
		profileImageUrl = responsePayload.picture;
		email = responsePayload.email;
		gID = responsePayload.sub;


	</script>
	<body>
		<div clas ="form">
			<form id="form" action="NewUser.php" method="post">
				<br>
				<label for = "firstName">First Name:</label><br>
				<input type = "text" id = "firstName" name = "firstName" >
				<br><br>
				<label for = "lastName">Last Name:</label><br>
				<input type = "text" id = "lastName" name = "lastName">
				<br><br>
				<label for = "Email: ">Email:</label><br>
				<input type = "text" id = "email" name = "email">
				<br><br>
				<label for = "phoneNumber">Phone Number</label><br>
				<input type = "text" id = "phoneNumber" name = "phoneNumber">
				<br><br>
				<label for = "DoB">Date of Birth: (YYYY-MM-DD)</label><br>
				<input type = "text" id = "DoB" name = "DoB">
				<input type="hidden" id = "gID" name = "gID"> 
				<input type="hidden" id = "profileImageUrl" name ="profileImageUrl" > 
				<input type="hidden" id = "id_token" name ="id_token"> 
				<br><br>
				<input type = "submit" value = "Submit">


			</form>

		</div>
	</body>
	<script>
			document.getElementById('firstName').value = firstName;
			document.getElementById('lastName').value = lastName;
			document.getElementById('email').value = email;
			document.getElementById('gID').value = gID;
			document.getElementById('profileImageUrl').value = profileImageUrl;	
			document.getElementById('id_token').value = id_token;	

		</script>
</b1>
</html>